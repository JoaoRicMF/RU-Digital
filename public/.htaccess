DirectoryIndex index.html index.php
Options -Indexes

# Força HTTPS em produção
# RewriteCond %{HTTPS} off
# RewriteRule ^ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]

RewriteEngine On

# Permite acesso direto a arquivos e diretórios existentes (assets, css, js, html)
RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^ - [L]

# Redireciona apenas rotas /api/* para o Front Controller
RewriteRule ^api(/.*)?$ index.php [QSA,L,NC]

# Qualquer outra rota desconhecida → index.html (SPA fallback)
RewriteRule ^ index.html [L]

# Cabeçalhos de segurança
<IfModule mod_headers.c>
    Header always set X-Content-Type-Options    "nosniff"
    Header always set X-Frame-Options           "DENY"
    Header always set Referrer-Policy           "no-referrer"
    Header always set X-XSS-Protection "1; mode=block"
</IfModule>
